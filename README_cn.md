# ğŸ¯ Quota Manager Frontend

> åŸºäº Vue 3 + Element Plus çš„é…é¢ç®¡ç†ç³»ç»Ÿå‰ç«¯

## ğŸ“– é¡¹ç›®ç®€ä»‹

Quota Manager Frontend æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„é…é¢ç®¡ç†ç³»ç»Ÿå‰ç«¯åº”ç”¨ï¼Œæä¾›ç›´è§‚çš„ç”¨æˆ·ç•Œé¢ç”¨äºç®¡ç†é…é¢ç­–ç•¥ã€å®¡è®¡è®°å½•å’Œç³»ç»Ÿè®¾ç½®ã€‚

### âœ¨ ä¸»è¦åŠŸèƒ½

- ğŸ›ï¸ **ä»ªè¡¨æ¿** - ç³»ç»Ÿæ¦‚è§ˆå’Œå¿«é€Ÿæ“ä½œ
- ğŸ“Š **ç­–ç•¥ç®¡ç†** - é…é¢ç­–ç•¥çš„åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤å’Œæ‰§è¡Œ
- ğŸ” **ç”¨æˆ·å®¡è®¡** - é…é¢ä½¿ç”¨è®°å½•å’Œå®¡è®¡æ—¥å¿—
- âš™ï¸ **ç³»ç»Ÿè®¾ç½®** - APIé…ç½®å’Œç³»ç»Ÿå‚æ•°è®¾ç½®

### ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Vue 3 (Composition API)
- **UIç»„ä»¶**: Element Plus
- **æ„å»ºå·¥å…·**: Vite
- **HTTPå®¢æˆ·ç«¯**: Axios
- **è·¯ç”±**: Vue Router
- **æ ·å¼**: CSS3 + Flexbox

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16
- npm >= 8

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘ç¯å¢ƒå¯åŠ¨

```bash
npm run dev
```

è®¿é—® `http://localhost:3000` (ç«¯å£å¯èƒ½ä¼šè‡ªåŠ¨è°ƒæ•´)

### ç”Ÿäº§ç¯å¢ƒæ„å»º

```bash
npm run build
```

æ„å»ºæ–‡ä»¶å°†è¾“å‡ºåˆ° `dist/` ç›®å½•

## ğŸ”§ é…ç½®ç®¡ç†

### ç»Ÿä¸€é…ç½®ç³»ç»Ÿ

é¡¹ç›®é‡‡ç”¨ç»Ÿä¸€çš„é…ç½®ç®¡ç†ç³»ç»Ÿï¼Œæ‰€æœ‰é…ç½®éƒ½é›†ä¸­åœ¨æ ¹ç›®å½•çš„ `app.config.js` æ–‡ä»¶ä¸­ï¼š

#### é…ç½®æ¨¡å—
- **APIé…ç½®**: åç«¯åœ°å€ã€è¶…æ—¶æ—¶é—´ã€è®¤è¯ç­‰
- **UIé…ç½®**: å¸ƒå±€å°ºå¯¸ã€è¡¨æ ¼è®¾ç½®ã€è¡¨å•é…ç½®ç­‰
- **åŠŸèƒ½å¼€å…³**: è‡ªåŠ¨åˆ·æ–°ã€æš—é»‘æ¨¡å¼ã€è°ƒè¯•æ¨¡å¼ç­‰
- **é”™è¯¯å¤„ç†**: é”™è¯¯æ¶ˆæ¯ã€çŠ¶æ€ç æ˜ å°„ç­‰
- **ç¼“å­˜ç®¡ç†**: å­˜å‚¨é”®åã€è¿‡æœŸæ—¶é—´ç­‰

#### ä½¿ç”¨æ–¹æ³•

```javascript
// å¯¼å…¥é…ç½®
import { API_CONFIG, UI_CONFIG, getApiUrl } from '@config'

// ä½¿ç”¨ç¤ºä¾‹
const apiUrl = getApiUrl('/strategies')
const pageSize = UI_CONFIG.TABLE.DEFAULT_PAGE_SIZE
```

#### å·¥å…·å‡½æ•°

```javascript
import {
  getApiUrl,          // æ„å»ºAPIå®Œæ•´URL
  isFeatureEnabled,   // æ£€æŸ¥åŠŸèƒ½æ˜¯å¦å¯ç”¨
  getCacheValue,      // è·å–ç¼“å­˜å€¼
  setCacheValue,      // è®¾ç½®ç¼“å­˜å€¼
  getErrorMessage     // è·å–æ ‡å‡†åŒ–é”™è¯¯æ¶ˆæ¯
} from '@config'
```

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env.local` æ–‡ä»¶æ¥è¦†ç›–é»˜è®¤é…ç½®ï¼š

```bash
# =================================
# API é…ç½®
# =================================
VITE_API_BASE_URL=http://localhost:8099
VITE_API_TIMEOUT=10000

# =================================
# åŠŸèƒ½å¼€å…³
# =================================
VITE_ENABLE_AUTO_REFRESH=true
VITE_ENABLE_DARK_MODE=false
VITE_DEBUG_MODE=false

# =================================
# å¼€å‘é…ç½®
# =================================
VITE_DEV_PORT=3000
```

#### é…ç½®ä¼˜å…ˆçº§
1. **ç¯å¢ƒå˜é‡** (æœ€é«˜) - `.env.local`ã€`.env` æ–‡ä»¶
2. **é»˜è®¤é…ç½®** (æœ€ä½) - `app.config.js` ä¸­çš„é»˜è®¤å€¼

## ğŸ“ é¡¹ç›®ç»“æ„

```
/
â”œâ”€â”€ app.config.js          # ğŸ¯ ç»Ÿä¸€é…ç½®æ–‡ä»¶
â””â”€â”€ src/
    â”œâ”€â”€ assets/           # é™æ€èµ„æº
    â”‚   â”œâ”€â”€ main.css     # ä¸»æ ·å¼æ–‡ä»¶
    â”‚   â””â”€â”€ base.css     # åŸºç¡€æ ·å¼
    â”œâ”€â”€ components/      # å…¬å…±ç»„ä»¶
    â”œâ”€â”€ router/          # è·¯ç”±é…ç½®
    â”œâ”€â”€ services/        # APIæœåŠ¡
    â”‚   â””â”€â”€ api.js       # APIæ¥å£å®šä¹‰
    â”œâ”€â”€ views/           # é¡µé¢ç»„ä»¶
    â”‚   â”œâ”€â”€ Dashboard.vue     # ä»ªè¡¨æ¿
    â”‚   â”œâ”€â”€ StrategyList.vue  # ç­–ç•¥åˆ—è¡¨
    â”‚   â”œâ”€â”€ StrategyDetail.vue # ç­–ç•¥è¯¦æƒ…
    â”‚   â”œâ”€â”€ UserAudit.vue     # ç”¨æˆ·å®¡è®¡
    â”‚   â””â”€â”€ Settings.vue      # ç³»ç»Ÿè®¾ç½®
    â”œâ”€â”€ App.vue          # æ ¹ç»„ä»¶
    â””â”€â”€ main.js          # å…¥å£æ–‡ä»¶
```

## ğŸ”Œ API æ¥å£

### åç«¯é›†æˆ

é¡¹ç›®é€šè¿‡ Axios ä¸åç«¯ API é€šä¿¡ï¼Œæ‰€æœ‰æ¥å£éƒ½éµå¾ªç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼š

```javascript
{
  "code": "success",               // çŠ¶æ€ç  (å­—ç¬¦ä¸²æ ¼å¼)
  "message": "Operation success",   // æ¶ˆæ¯ (è‹±æ–‡)
  "success": true,                 // æ“ä½œæ˜¯å¦æˆåŠŸ
  "data": { ... }                  // å“åº”æ•°æ® (å¯é€‰)
}
```

### ä¸»è¦æ¥å£

- **ç­–ç•¥ç®¡ç†**: ç­–ç•¥çš„CRUDæ“ä½œã€å¯ç”¨/ç¦ç”¨ã€æ‰«æè§¦å‘
- **é…é¢ç®¡ç†**: ç”¨æˆ·é…é¢æŸ¥è¯¢ã€è½¬å…¥/è½¬å‡ºæ“ä½œ
- **å®¡è®¡è®°å½•**: é…é¢ä½¿ç”¨è®°å½•å’Œå®¡è®¡æ—¥å¿—æŸ¥è¯¢

## ğŸ¨ ç•Œé¢è®¾è®¡

### å“åº”å¼å¸ƒå±€

- âœ… å…¨å±æ˜¾ç¤ºï¼Œå……æ»¡æ•´ä¸ªæµè§ˆå™¨çª—å£
- âœ… ä¾§è¾¹æ  + ä¸»å†…å®¹åŒºåŸŸå¸ƒå±€
- âœ… ç»Ÿä¸€çš„é¡µé¢å¤´éƒ¨è®¾è®¡
- âœ… é€‚é…ä¸åŒå±å¹•å°ºå¯¸

### ç»„ä»¶æ ·å¼

- **è¡¨æ ¼**: åˆ†é¡µã€æ’åºã€ç­›é€‰åŠŸèƒ½
- **è¡¨å•**: ç»Ÿä¸€çš„æ ‡ç­¾å®½åº¦å’ŒéªŒè¯æ ·å¼
- **æŒ‰é’®**: ä¸€è‡´çš„å°ºå¯¸å’Œé—´è·
- **æ¶ˆæ¯æç¤º**: æ ‡å‡†åŒ–çš„é”™è¯¯å’ŒæˆåŠŸæç¤º

## ğŸ” å¼€å‘æŒ‡å—

### æ¨è IDE è®¾ç½®

[VSCode](https://code.visualstudio.com/) + [Volar](https://marketplace.visualstudio.com/items?itemName=Vue.volar) (ç¦ç”¨ Vetur)

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ Vue 3 Composition API
- ç»Ÿä¸€ä½¿ç”¨é…ç½®ç³»ç»Ÿè€Œéç¡¬ç¼–ç 
- éµå¾ª Element Plus ç»„ä»¶è§„èŒƒ
- ä¿æŒä»£ç ç®€æ´å’Œå¯è¯»æ€§

### æœ€ä½³å®è·µ

#### âœ… æ¨èåšæ³•
- ä½¿ç”¨æ ¹ç›®å½•çš„é…ç½®æ–‡ä»¶ `app.config.js`
- é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–é…ç½®
- ä½¿ç”¨ `@config` åˆ«åå¯¼å…¥é…ç½®
- ä½¿ç”¨å·¥å…·å‡½æ•°è¿›è¡Œé…ç½®æ“ä½œ
- ä¸ºæ–°é…ç½®é¡¹æä¾›åˆç†çš„é»˜è®¤å€¼
- ä½¿ç”¨è¯­ä¹‰åŒ–çš„å˜é‡å’Œå‡½æ•°å‘½å

#### âŒ é¿å…åšæ³•
- åœ¨ç»„ä»¶ä¸­ç¡¬ç¼–ç é…ç½®å€¼
- ç›´æ¥ä¿®æ”¹é…ç½®å¯¹è±¡
- å¿½ç•¥ç¯å¢ƒå˜é‡å‰ç¼€ `VITE_`
- åœ¨ç”Ÿäº§ç¯å¢ƒå¼€å¯è°ƒè¯•æ¨¡å¼

## ğŸš¨ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. ç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ
- âœ… ç¡®ä¿å˜é‡åä»¥ `VITE_` å¼€å¤´
- âœ… é‡å¯å¼€å‘æœåŠ¡å™¨
- âœ… æ£€æŸ¥ `.env.local` æ–‡ä»¶ä½ç½®

#### 2. é…ç½®ç¼“å­˜é—®é¢˜
- âœ… æ¸…é™¤æµè§ˆå™¨ LocalStorage
- âœ… ä½¿ç”¨ç¡¬åˆ·æ–° (Ctrl+Shift+R)

#### 3. é…ç½®éªŒè¯å¤±è´¥
- âœ… æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- âœ… æ£€æŸ¥å¿…éœ€é…ç½®é¡¹æ˜¯å¦ä¸ºç©º

#### 4. æ¥å£è¯·æ±‚å¤±è´¥
- âœ… ç¡®è®¤åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
- âœ… æ£€æŸ¥ API åœ°å€é…ç½®æ˜¯å¦æ­£ç¡®
- âœ… æŸ¥çœ‹ç½‘ç»œè¯·æ±‚çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯

### è°ƒè¯•æŠ€å·§

```javascript
// å¼€å‘ç¯å¢ƒä¸‹æ‰“å°é…ç½®ä¿¡æ¯
if (ENV_CONFIG.IS_DEV) {
  console.log('Current config:', {
    API_CONFIG,
    UI_CONFIG,
    FEATURE_CONFIG
  })
}
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### 1. æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
# æˆ–ä½¿ç”¨ Makefile
make dev
```

### 2. Docker éƒ¨ç½²

#### å•ç‹¬è¿è¡Œå‰ç«¯
```bash
# æ„å»º Docker é•œåƒ
make docker-build

# è¿è¡Œå®¹å™¨
make docker-run

# è®¿é—®åº”ç”¨
curl http://localhost:3000/health
```

#### ä½¿ç”¨ Docker Compose
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
make compose-up

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
make compose-down
```

### 3. Kubernetes éƒ¨ç½²

#### å‰ææ¡ä»¶
- Kubernetes é›†ç¾¤å·²å°±ç»ª
- kubectl å·²é…ç½®
- é•œåƒå·²æ¨é€åˆ°å®¹å™¨ä»“åº“

#### éƒ¨ç½²æ­¥éª¤
```bash
# ä¸€é”®éƒ¨ç½²ï¼ˆæ„å»ºã€æ¨é€ã€éƒ¨ç½²ï¼‰
make deploy

# æˆ–åˆ†æ­¥æ‰§è¡Œ
make docker-build    # æ„å»ºé•œåƒ
make docker-push     # æ¨é€é•œåƒ
make k8s-apply       # éƒ¨ç½²åˆ° K8s

# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
kubectl get pods,svc,ingress -n shenma -l app=quota-manager-frontend

# æŸ¥çœ‹æ—¥å¿—
kubectl logs -f -n shenma -l app=quota-manager-frontend
```

## ğŸ“ éƒ¨ç½²æ–‡ä»¶è¯´æ˜

### Docker ç›¸å…³
- `Dockerfile` - å¤šé˜¶æ®µæ„å»ºé…ç½®
- `nginx.conf` - Nginx æœåŠ¡å™¨é…ç½®
- `docker-compose.yml` - æœ¬åœ°å¼€å‘ç¯å¢ƒé…ç½®
- `.dockerignore` - Docker æ„å»ºå¿½ç•¥æ–‡ä»¶

### Kubernetes ç›¸å…³
- `k8s-deployment.yaml` - K8s éƒ¨ç½²é…ç½®ï¼ŒåŒ…å«ï¼š
  - ConfigMap: å‰ç«¯é…ç½®
  - Deployment: åº”ç”¨éƒ¨ç½²
  - Service: æœåŠ¡æš´éœ²
  - Ingress: å¤–éƒ¨è®¿é—®
  - HPA: è‡ªåŠ¨æ‰©ç¼©å®¹

### æ„å»ºå·¥å…·
- `Makefile` - ç®€åŒ–å¸¸ç”¨å‘½ä»¤
- `package.json` - åŒ…å« Docker å’Œ K8s ç›¸å…³è„šæœ¬

## ğŸ”§ éƒ¨ç½²é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
| å˜é‡å | æè¿° | é»˜è®¤å€¼ |
|--------|------|--------|
| `NODE_ENV` | è¿è¡Œç¯å¢ƒ | `production` |
| `VITE_API_BASE_URL` | åç«¯ API åœ°å€ | `http://quota-manager-svc:8080` |
| `TZ` | æ—¶åŒºè®¾ç½® | `Asia/Shanghai` |

### èµ„æºé…ç½®
| èµ„æº | è¯·æ±‚å€¼ | é™åˆ¶å€¼ |
|------|--------|--------|
| CPU | 100m | 500m |
| Memory | 128Mi | 512Mi |

### ç½‘ç»œé…ç½®
- å®¹å™¨ç«¯å£: 80
- æœåŠ¡ç«¯å£: 80
- å¥åº·æ£€æŸ¥: `/health`

## ğŸŒ è®¿é—®æ–¹å¼

### æœ¬åœ°å¼€å‘
- å¼€å‘æœåŠ¡å™¨: `http://localhost:3005`
- Docker å®¹å™¨: `http://localhost:3000`

### Kubernetes ç¯å¢ƒ
- é›†ç¾¤å†…è®¿é—®: `http://quota-manager-frontend-svc.shenma.svc.cluster.local`
- Ingress è®¿é—®: `http://quota-manager.shenma.local` (éœ€é…ç½® DNS)

## ğŸ›  å¼€å‘å·¥ä½œæµ

### æ—¥å¸¸å¼€å‘
```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 2. å®‰è£…/æ›´æ–°ä¾èµ–
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
make dev

# 4. å¼€å‘å®Œæˆåæ„å»ºæµ‹è¯•
make build
```

### å‘å¸ƒæµç¨‹
```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆåœ¨ Makefile ä¸­ï¼‰
vim Makefile

# 2. æ„å»ºå’Œéƒ¨ç½²
make deploy

# 3. éªŒè¯éƒ¨ç½²
kubectl get pods -n shenma -l app=quota-manager-frontend
```

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### æŸ¥çœ‹æ—¥å¿—
```bash
# Docker Compose
docker-compose logs -f quota-manager-frontend

# Kubernetes
kubectl logs -f -n shenma deployment/quota-manager-frontend
```

### ç›‘æ§æŒ‡æ ‡
- CPU ä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- HTTP å“åº”æ—¶é—´
- é”™è¯¯ç‡

## ğŸ”’ å®‰å…¨é…ç½®

### Nginx å®‰å…¨å¤´
- X-Frame-Options: SAMEORIGIN
- X-XSS-Protection: 1; mode=block
- X-Content-Type-Options: nosniff
- Content-Security-Policy: å·²é…ç½®

### å®¹å™¨å®‰å…¨
- ä½¿ç”¨é root ç”¨æˆ·è¿è¡Œ
- æœ€å°åŒ–é•œåƒå±‚
- å®šæœŸæ›´æ–°åŸºç¡€é•œåƒ

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–
- Gzip å‹ç¼©å¯ç”¨
- é™æ€èµ„æºç¼“å­˜ç­–ç•¥
- ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½

### Kubernetes ä¼˜åŒ–
- HPA è‡ªåŠ¨æ‰©ç¼©å®¹
- èµ„æºé™åˆ¶é…ç½®
- å°±ç»ªå’Œå­˜æ´»æ¢é’ˆ

## ğŸš¨ éƒ¨ç½²æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. æ„å»ºå¤±è´¥
```bash
# æ£€æŸ¥ Node.js ç‰ˆæœ¬
node --version

# æ¸…ç†ç¼“å­˜é‡è¯•
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

#### 2. Docker è¿è¡Œå¤±è´¥
```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs quota-manager-frontend

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it quota-manager-frontend sh
```

#### 3. K8s éƒ¨ç½²å¤±è´¥
```bash
# æŸ¥çœ‹ Pod çŠ¶æ€
kubectl describe pod -n shenma -l app=quota-manager-frontend

# æŸ¥çœ‹äº‹ä»¶
kubectl get events -n shenma --sort-by='.lastTimestamp'
```

### å¥åº·æ£€æŸ¥
```bash
# æœ¬åœ°æ£€æŸ¥
curl http://localhost:3000/health

# K8s æ£€æŸ¥
kubectl exec -n shenma deploy/quota-manager-frontend -- curl http://localhost/health
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (Latest)
- âœ… å»ºç«‹ç»Ÿä¸€é…ç½®ç®¡ç†ç³»ç»Ÿ
- âœ… å®Œå–„ç•Œé¢å¸ƒå±€å’Œå“åº”å¼è®¾è®¡
- âœ… å®ç°ç­–ç•¥ç®¡ç†åŠŸèƒ½
- âœ… æ·»åŠ ç”¨æˆ·å®¡è®¡åŠŸèƒ½
- âœ… å®Œå–„ç³»ç»Ÿè®¾ç½®é¡µé¢
- âœ… ä¼˜åŒ–ç”¨æˆ·ä½“éªŒå’Œè§†è§‰è®¾è®¡
- âœ… å®Œæ•´çš„ Docker å’Œ Kubernetes éƒ¨ç½²æ”¯æŒ
- âœ… ç”Ÿäº§çº§ Nginx é…ç½®å’Œå®‰å…¨ä¼˜åŒ–
- âœ… è‡ªåŠ¨æ‰©ç¼©å®¹å’Œç›‘æ§é…ç½®

## ğŸ†˜ æ”¯æŒä¸è”ç³»

å¦‚é‡é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- å¼€å‘å›¢é˜Ÿ: ShenMA AI Team
- é¡¹ç›®ä»“åº“: [é¡¹ç›®åœ°å€]
- æ–‡æ¡£åœ°å€: [æ–‡æ¡£åœ°å€]

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- æ£€æŸ¥ç½‘ç»œè¯·æ±‚çŠ¶æ€
- ç¡®è®¤é…ç½®æ–‡ä»¶è¯­æ³•æ­£ç¡®

### è´¡çŒ®ä»£ç 
æ¬¢è¿æäº¤ Issues å’Œ Pull Requests æ¥æ”¹è¿›é¡¹ç›®ã€‚

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº Apache-2.0 è®¸å¯è¯å¼€æºã€‚è¯¦æƒ…è¯·å‚é˜… LICENSE æ–‡ä»¶ã€‚

---

**Quota Manager Frontend** Â© 2025 Sangfor Technologies
